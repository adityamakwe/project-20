<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User List</title>
</head>
<body>
{% include "Header.html" %}

<form method="POST">
    {% csrf_token %}

    <div align="center">
        <h1>User List</h1>
        {% if form.error %}
        <h3><font color="red"> {{ form.message }} </font></h3>
        {% else %}
        <h3><font color="green"> {{ form.message }} </font></h3>
        {% endif %}
    </div>

    <div align="center">
        <table>
            <tr>
                <th>First Name:</th>
                <td>
                    <input type="text" name="firstName" placeholder="Enter first name here"
                           value="{{ form.firstName }}">
                </td>
                <th>D.O.B</th>
                <td><input type="date" name='dob' placeholder="Enter DOB here" value="{{form.dob}}"></td>

                <th>Role:</th>
                <td>
                    <select name="roleId" style="width:100%">
                        <option value="{{form.roleId}}">{{ form.roleName }}</option>
                        {% for role in roleList %}
                        <option value="{{ role.id }}">{{ role.name }}</option>
                        {% endfor %}
                    </select>
                </td>
                <td style="position: fixed; color: red;">{{ form.inputError.roleId }}</td>
                <td>
                    <input type="submit" name="operation" value="search">
                </td>

            </tr>
        </table>
    </div>

    <br>

    <table border="1" width="100%">
        <tr>
            <th><input type="checkbox" id="selectall"></th>
            <th>S. No.</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Login</th>
            <th>DOB</th>
            <th>Role</th>
            <th>Address</th>
            <th>Gender</th>
            <th>Mobile</th>
            <th>Edit</th>
        </tr>
        {% for l in pageList %}
        <tr>
            {% if l.roleName == "Admin" %}
            <td align="center"><input disabled type="checkbox" class="case" name="ids" value="{{ l.id }}"></td>
            {% else %}
            <td align="center"><input type="checkbox" class="case" name="ids" value="{{ l.id }}"></td>
            {% endif %}

            <td align="center">{{ form.index|add:forloop.counter }}</td>
            <td align="center">{{ l.firstName }}</td>
            <td align="center">{{ l.lastName }}</td>
            <td align="center">{{ l.loginId }}</td>
            <td align="center">{{ l.dob }}</td>
            <td align="center">{{ l.roleName }}</td>
            <td align="center">{{ l.address }}</td>
            <td align="center">{{ l.gender }}</td>
            <td align="center">{{ l.mobileNumber }}</td>

            {% if l.roleName == "Admin" %}
            <td align="center"><a href="/ORS/User/Edit/{{ l.id }}" onclick='return false;'>edit</a></td>
            {% else %}
            <td align="center"><a href="/ORS/User/Edit/{{ l.id }}">edit</a></td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

    <br>

    <table style="width: 100%">
        <tr>
            <td style="width: 30%">
                {% if form.pageNo == 1 %}
                <input type="submit" name="operation" value="previous" disabled>
                {% else %}
                <input type="submit" name="operation" value="previous">
                {% endif %}
            </td>

            <td style="width: 30%">
                <input type="submit" name="operation" value="new">
            </td>

            <td style="width: 25%">
                <input type="submit" name="operation" value="delete">
            </td>

            <td style="text-align: right;">
                {% if pageList|length < 5 or form.lastId == form.maxId %}
                <input type="submit" name="operation" value="next" disabled>
                {% else %}
                <input type="submit" name="operation" value="next">
                {% endif %}
            </td>
        </tr>
    </table>
</form>
</body>
{%include "Footer.html"%}
</html>